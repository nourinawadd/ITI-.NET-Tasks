@{
    ViewData["Title"] = "Test JSON Fetch";
}

<h2>Test Fetch API - Movies JSON</h2>
<button id="loadJsonBtn" class="btn btn-primary">Load Movies</button>
<pre id="jsonContainer" class="border p-3 mt-3"></pre>

@section Scripts {
    <script>
        document.getElementById('loadJsonBtn').addEventListener('click', () => {
            fetch('/Movie/GetMoviesJson')
                .then(response => {
                    if (!response.ok) throw new Error('Network response was not ok');
                    return response.json();
                })
                .then(data => {
                    document.getElementById('jsonContainer').textContent =
                        JSON.stringify(data, null, 2);
                })
                .catch(error => {
                    console.error('Error loading JSON:', error);
                    document.getElementById('jsonContainer').innerHTML =
                        `<div class="text-danger">Error loading data: ${error.message}</div>`;
                });
        });
    </script>
}
