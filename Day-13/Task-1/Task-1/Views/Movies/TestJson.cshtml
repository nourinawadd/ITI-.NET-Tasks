@{
    ViewData["Title"] = "Movies via AJAX";
}
<h1>Movies via AJAX</h1>

<button id="loadMovies" class="btn btn-primary mb-2">Load Movies</button>
<pre id="moviesContainer" class="border rounded p-2"></pre>

<script>
document.getElementById('loadMovies').addEventListener('click', () => {
    fetch('/Movies/GetMoviesJson')
        .then(res => {
            if (!res.ok) throw new Error('Network response was not ok');
            return res.json();
        })
        .then(data => {
            // show formatted JSON
            const formatted = JSON.stringify(data, null, 2);
            document.getElementById("moviesContainer").textContent = formatted;
        })
        .catch(err => {
            document.getElementById("moviesContainer").textContent =
                'Error loading data: ' + err.message;
        });
});
</script>
